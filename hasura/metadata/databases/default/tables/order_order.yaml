table:
  name: order
  schema: order
configuration:
  custom_column_names: {}
  custom_root_fields:
    delete: deleteOrders
    delete_by_pk: deleteOrder
    insert: createOrders
    insert_one: createOrder
    select: orders
    select_aggregate: ordersAggregate
    select_by_pk: order
    update: updateOrders
    update_by_pk: updateOrder
object_relationships:
- name: brand
  using:
    manual_configuration:
      column_mapping:
        brandId: id
      insertion_order: null
      remote_table:
        name: brand
        schema: brands
- name: cart
  using:
    foreign_key_constraint_on: cartId
- name: customer
  using:
    manual_configuration:
      column_mapping:
        keycloakId: keycloakId
      insertion_order: null
      remote_table:
        name: customer
        schema: crm
- name: deliveryService
  using:
    foreign_key_constraint_on: deliveryPartnershipId
- name: orderDate
  using:
    manual_configuration:
      column_mapping:
        created_at: date
      insertion_order: null
      remote_table:
        name: date
        schema: insights
- name: thirdPartyOrder
  using:
    foreign_key_constraint_on: thirdPartyOrderId
array_relationships:
- name: rewardHistories
  using:
    foreign_key_constraint_on:
      column: orderId
      table:
        name: rewardHistory
        schema: crm
computed_fields:
- comment: ""
  definition:
    function:
      name: ordersummary
      schema: order
  name: summary
event_triggers:
- definition:
    enable_manual: true
    insert:
      columns: "*"
  name: Order_Created
  retry_conf:
    interval_sec: 10
    num_retries: 0
    timeout_sec: 60
  webhook: "{{DAILYOS_SERVER_URL}}/webhook/notification/manage"
- definition:
    enable_manual: true
    update:
      columns:
      - deliveryPartnershipId
  headers:
  - name: OrganizationId
    value_from_env: HEADER_REMOTE_SCHEMA_ORGANIZATIONID
  name: createDelivery
  retry_conf:
    interval_sec: 10
    num_retries: 0
    timeout_sec: 60
  webhook_from_env: WEBHOOK_CREATE_DELIVERY
- definition:
    enable_manual: false
    insert:
      columns: "*"
  name: orderReceivedWebhookEvent
  retry_conf:
    interval_sec: 10
    num_retries: 0
    timeout_sec: 60
  webhook: https://test.dailykit.org/server/sendWebhookEvent
- definition:
    enable_manual: false
    insert:
      columns: "*"
  name: order_recieve
  retry_conf:
    interval_sec: 10
    num_retries: 0
    timeout_sec: 60
  webhook: "{{DAILYOS_SERVER_URL}}/api/developer/webhookEvents/processWebhookEvents"
